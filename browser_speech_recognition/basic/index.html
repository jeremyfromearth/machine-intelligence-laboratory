<!DOCTYPE html>
<html>
<head>
	<title>Basic Speech Recognition</title>
	<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body>
<h4>Speech To Text Converter</h4>
<div id="result"></div>
<button id="btn"><i class="fa fa-microphone"></i></button>
</body>
<script>
	var result = document.getElementById('result');
	function startConverting() {
		if(!('webkitSpeechRecognition' in window)) {
			upgrade();
		} else {
			var speechRecognizer = new webkitSpeechRecognition();
			/**
			 * the continuous property means the speech 
			 * recognizer will continue to listen, even after
			 * the user has stopped talking.
			 */
			speechRecognizer.continuous = true;
			speechRecognizer.interimResults = true;
			speechRecognizer.lang = 'en-US';
			// var SpeechGrammarList = SpeechGrammarList || webkitSpeechGrammarList;
			// var SpeechRecognitionEvent = SpeechRecognitionEvent || webkitSpeechRecognitionEvent
			speechRecognizer.start();
			var finalTranscripts = '';

			speechRecognizer.onresult = function(event) {
				var interimTranscripts = '';
				for(var i = 0; i < event.results.length; i++) {
					var transcript = event.results[i][0].transcript;
					transcript.replace("\n", "<br>");
					if(event.results[i].isFinal){
						finalTranscripts += transcript;
					} else {
						interimTranscripts += transcript;
					}
				}
				result.innerHTML = finalTranscripts + '<span style="color:#999">' + interimTranscripts + '</span>';
				console.log(speechRecognizer);
			};

			speechRecognizer.onerror = function(event) {

			};

		}
		
		
	}

	var button = document.getElementById('btn');
	button.addEventListener('click', startConverting);



</script>
</html>